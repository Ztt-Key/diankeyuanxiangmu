<template>
  <div class="help-guide">
    <!-- å¸®åŠ©æŒ‰é’® -->
    <div class="help-button" @click="toggleGuide" :class="{ active: showGuide }">
      <div class="help-icon">?</div>
      <span>æ“ä½œæŒ‡å¼•</span>
    </div>

    <!-- æ“ä½œæŒ‡å¼•å¼¹çª— -->
    <transition name="fade">
      <div class="guide-modal" v-if="showGuide" @click.self="closeGuide">
        <div class="guide-content">
          <div class="guide-header">
            <h2>æ“ä½œæŒ‡å¼•</h2>
            <div class="close-btn" @click="closeGuide">Ã—</div>
          </div>
          
          <div class="guide-body">
            <!-- åŸºç¡€æ“ä½œ -->
            <div class="guide-section">
              <h3>ğŸ–±ï¸ åŸºç¡€æ“ä½œ</h3>
              <div class="guide-item">
                <div class="key-combo">
                  <span class="key">é¼ æ ‡æ»šè½®</span>
                </div>
                <div class="description">ç¼©æ”¾è§†è§’ï¼ˆæ§åˆ¶ç›¸æœºè¿œè¿‘ï¼‰</div>
              </div>
              <div class="guide-item">
                <div class="key-combo">
                  <span class="key">æŸœå­åŠ¨æ•ˆ</span>
                </div>
                <div class="description">çº¢è‰²è¡¨ç¤ºå…³é—­ï¼Œç»¿è‰²è¡¨ç¤ºå¼€å¯</div>
              </div>
              <div class="guide-item">
                <div class="key-combo">
                  <span class="key">é¼ æ ‡å·¦é”®</span>
                  <span class="plus">+</span>
                  <span class="key">æ‹–åŠ¨</span>
                </div>
                <div class="description">æ—‹è½¬è§†è§’ï¼ˆå›´ç»•åœºæ™¯æ—‹è½¬ï¼‰</div>
              </div>
              <div class="guide-item">
                <div class="key-combo">
                  <span class="key">é¼ æ ‡å³é”®</span>
                  <span class="plus">+</span>
                  <span class="key">æ‹–åŠ¨</span>
                </div>
                <div class="description">å¹³ç§»è§†è§’ï¼ˆå·¦å³ä¸Šä¸‹ç§»åŠ¨ï¼‰</div>
              </div>
            </div>

            <!-- å¿«æ·æ“ä½œ -->
            <div class="guide-section">
              <h3>âŒ¨ï¸ å¿«æ·æ“ä½œ</h3>
              <div class="guide-item">
                <div class="key-combo">
                  <span class="key">Shift</span>
                  <span class="plus">+</span>
                  <span class="key">é¼ æ ‡å·¦é”®</span>
                </div>
                <div class="description">åˆ‡æ¢ç›¸æœºä½ç½®/å¿«é€Ÿå®šä½</div>
              </div>
              <div class="guide-item">
                <div class="key-combo">
                  <span class="key">åŒå‡»</span>
                </div>
                <div class="description">å¿«é€Ÿèšç„¦åˆ°ç‚¹å‡»ä½ç½®</div>
              </div>
            </div>

            <!-- åŠŸèƒ½æ¨¡å— -->
            <div class="guide-section">
              <h3>ğŸ“‹ åŠŸèƒ½æ¨¡å—</h3>
              <div class="guide-item">
                <div class="module-name">é¦–é¡µ</div>
                <div class="description">è¿”å›å›­åŒºæ•´ä½“è§†å›¾ï¼ŒæŸ¥çœ‹å…¨å±€åœºæ™¯</div>
              </div>
              <div class="guide-item">
                <div class="module-name">æ“ä½œä»¿çœŸ</div>
                <div class="description">è¿›å…¥é…ç”µå®¤ä»¿çœŸæ¨¡å¼ï¼Œå¯ä»¥ç‚¹å‡»é…ç”µå®¤è¿›è¡Œæ“ä½œè®­ç»ƒ</div>
              </div>
              <div class="guide-item">
                <div class="module-name">çº¿ç¼†æ˜¾ç¤º</div>
                <div class="description">æŸ¥çœ‹å›­åŒºç”µåŠ›çº¿ç¼†åˆ†å¸ƒå’Œèµ°å‘</div>
              </div>
            </div>

            <!-- é…ç”µå®¤æ“ä½œ -->
            <div class="guide-section">
              <h3>ğŸ”Œ é…ç”µå®¤æ“ä½œ</h3>
              <div class="guide-item">
                <div class="key-combo">
                  <span class="key">ç‚¹å‡»é…ç”µæŸœ</span>
                </div>
                <div class="description">æŸ¥çœ‹é…ç”µæŸœè¯¦ç»†ä¿¡æ¯å’Œå›è·¯çŠ¶æ€</div>
              </div>
              <div class="guide-item">
                <div class="key-combo">
                  <span class="key">å¤åŸæŒ‰é’®</span>
                </div>
                <div class="description">é‡ç½®å½“å‰è§†è§’åˆ°é»˜è®¤ä½ç½®</div>
              </div>
              <div class="guide-item">
                <div class="key-combo">
                  <span class="key">å›è·¯é¢æ¿</span>
                </div>
                <div class="description">ç‚¹å‡»å›è·¯å¯æŸ¥çœ‹ç”µè·¯è¯¦æƒ…å’Œè®¾å¤‡çŠ¶æ€</div>
              </div>
            </div>

            <!-- æç¤ºä¿¡æ¯ -->
            <div class="guide-tips">
              <div class="tip-title">ğŸ’¡ æ¸©é¦¨æç¤º</div>
              <ul>
                <li>é¦–æ¬¡ä½¿ç”¨å»ºè®®å…ˆæµè§ˆå…¨å±€è§†å›¾ï¼Œç†Ÿæ‚‰å›­åŒºå¸ƒå±€</li>
                <li>è¿›å…¥é…ç”µå®¤åå¯é€šè¿‡å·¦ä¸‹è§’æŒ‰é’®åˆ‡æ¢ä¸åŒé…ç”µå®¤</li>
                <li>å¦‚è§†è§’ä¸¢å¤±ï¼Œå¯ç‚¹å‡»"å¤åŸ"æŒ‰é’®é‡ç½®</li>
                <li>é¼ æ ‡æ‚¬åœåœ¨è®¾å¤‡ä¸Šå¯æŸ¥çœ‹è®¾å¤‡åç§°</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </transition>
  </div>
</template>

<script>
export default {
  name: 'helpGuide',
  data() {
    return {
      showGuide: false
    };
  },
  methods: {
    toggleGuide() {
      this.showGuide = !this.showGuide;
    },
    closeGuide() {
      this.showGuide = false;
    }
  },
  mounted() {
    // ç›‘å¬ESCé”®å…³é—­å¼¹çª—
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && this.showGuide) {
        this.closeGuide();
      }
    });
  }
};
</script>

<style lang="less" scoped>
.help-guide {
  position: fixed;
  z-index: 1002;
}

// å¸®åŠ©æŒ‰é’®
.help-button {
  position: fixed;
  top: 30px;
  right: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 60px;
  height: 80px;
  background: rgba(0, 42, 75, 0.7);
  border: 1px solid #1890ff;
  border-radius: 5px;
  cursor: pointer;
  transition: all 0.3s ease;
  
  &:hover, &.active {
    background: rgba(0, 58, 102, 0.9);
    transform: scale(1.05);
    border-color: #40a9ff;
  }
  
  .help-icon {
    width: 32px;
    height: 32px;
    margin-bottom: 5px;
    background: linear-gradient(135deg, #1890ff, #40a9ff);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    font-weight: bold;
    color: #fff;
  }
  
  span {
    color: #91d5ff;
    font-size: 12px;
    text-align: center;
  }
}

// å¼¹çª—é®ç½©å’Œå†…å®¹
.guide-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

.guide-content {
  width: 600px;
  max-width: 90%;
  max-height: 85vh;
  background: linear-gradient(180deg, rgba(0, 42, 75, 0.95) 0%, rgba(0, 30, 55, 0.98) 100%);
  border: 1px solid #1890ff;
  border-radius: 10px;
  box-shadow: 0 0 30px rgba(24, 144, 255, 0.3);
  overflow: hidden;
}

.guide-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 15px 20px;
  background: linear-gradient(90deg, rgba(24, 144, 255, 0.3) 0%, rgba(24, 144, 255, 0.1) 100%);
  border-bottom: 1px solid rgba(24, 144, 255, 0.3);
  
  h2 {
    margin: 0;
    color: #fff;
    font-size: 20px;
    font-weight: 500;
  }
  
  .close-btn {
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    color: #91d5ff;
    cursor: pointer;
    border-radius: 50%;
    transition: all 0.3s ease;
    
    &:hover {
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
    }
  }
}

.guide-body {
  padding: 20px;
  max-height: calc(85vh - 60px);
  overflow-y: auto;
  
  // è‡ªå®šä¹‰æ»šåŠ¨æ¡
  &::-webkit-scrollbar {
    width: 6px;
  }
  
  &::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
  }
  
  &::-webkit-scrollbar-thumb {
    background: rgba(24, 144, 255, 0.5);
    border-radius: 3px;
    
    &:hover {
      background: rgba(24, 144, 255, 0.8);
    }
  }
}

.guide-section {
  margin-bottom: 20px;
  
  h3 {
    margin: 0 0 12px 0;
    color: #40a9ff;
    font-size: 16px;
    font-weight: 500;
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(24, 144, 255, 0.2);
  }
}

.guide-item {
  display: flex;
  align-items: center;
  padding: 10px 15px;
  margin-bottom: 8px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 6px;
  transition: all 0.3s ease;
  
  &:hover {
    background: rgba(24, 144, 255, 0.1);
  }
  
  .key-combo {
    display: flex;
    align-items: center;
    min-width: 180px;
    
    .key {
      padding: 4px 10px;
      background: linear-gradient(180deg, #3a3a5c 0%, #2a2a4c 100%);
      border: 1px solid #4a4a6c;
      border-radius: 4px;
      color: #fff;
      font-size: 13px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }
    
    .plus {
      margin: 0 8px;
      color: #91d5ff;
      font-size: 14px;
    }
  }
  
  .module-name {
    min-width: 180px;
    padding: 4px 12px;
    background: linear-gradient(135deg, #1890ff 0%, #096dd9 100%);
    border-radius: 4px;
    color: #fff;
    font-size: 13px;
    font-weight: 500;
    text-align: center;
  }
  
  .description {
    flex: 1;
    color: #b8d4e8;
    font-size: 14px;
    padding-left: 15px;
  }
}

.guide-tips {
  margin-top: 20px;
  padding: 15px;
  background: rgba(250, 173, 20, 0.1);
  border: 1px solid rgba(250, 173, 20, 0.3);
  border-radius: 8px;
  
  .tip-title {
    color: #faad14;
    font-size: 15px;
    font-weight: 500;
    margin-bottom: 10px;
  }
  
  ul {
    margin: 0;
    padding-left: 20px;
    
    li {
      color: #d4c4a8;
      font-size: 13px;
      line-height: 1.8;
      
      &::marker {
        color: #faad14;
      }
    }
  }
}

// è¿‡æ¸¡åŠ¨ç”»
.fade-enter-active, .fade-leave-active {
  transition: opacity 0.3s ease;
}

.fade-enter, .fade-leave-to {
  opacity: 0;
}

.fade-enter-active .guide-content {
  animation: slideIn 0.3s ease;
}

.fade-leave-active .guide-content {
  animation: slideOut 0.2s ease;
}

@keyframes slideIn {
  from {
    transform: translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideOut {
  from {
    transform: translateY(0);
    opacity: 1;
  }
  to {
    transform: translateY(-20px);
    opacity: 0;
  }
}
</style>
